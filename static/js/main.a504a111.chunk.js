(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{114:function(e,t,n){e.exports={dialogs:"Dialods_dialogs__3pw6b",items:"Dialods_items__WRwPF",textarea:"Dialods_textarea__2w4fZ",messages:"Dialods_messages__1ADMc",button:"Dialods_button__10I6w",form:"Dialods_form__QiZ_p"}},14:function(e,t,n){e.exports={img:"ProfileInfo_img__2eL49",myPosts:"ProfileInfo_myPosts__1UIGQ",enter:"ProfileInfo_enter__1XwGV",textarea:"ProfileInfo_textarea__2XXNt",button:"ProfileInfo_button__MGI7L",form:"ProfileInfo_form__26yzR",profile:"ProfileInfo_profile__2a9kK",profile_img:"ProfileInfo_profile_img__25ivM",profile_info:"ProfileInfo_profile_info__1UzzS",profile_span:"ProfileInfo_profile_span__3Izk9",profile_item:"ProfileInfo_profile_item__2MfbH",button_status:"ProfileInfo_button_status__2jwgf",status:"ProfileInfo_status__2pT48",profile_addPhoto:"ProfileInfo_profile_addPhoto__3idU_"}},140:function(e,t,n){e.exports={input_form:"InputForm_input_form__yQYti",formik:"InputForm_formik__Ukx0D",input:"InputForm_input__1jF-Z",add:"InputForm_add__97EYJ"}},168:function(e,t,n){e.exports={formSummaryError:"Login_formSummaryError__2wO84",login:"Login_login__DfaNc"}},175:function(e,t,n){e.exports={messages:"Message_messages__Ul6d5",message:"Message_message__JnIoV",avatar:"Message_avatar__tWJa9"}},176:function(e,t,n){e.exports={formControl:"FormsControls_formControl__SnNcS",error:"FormsControls_error__343Mq",createField:"FormsControls_createField__1ZwrO"}},178:function(e,t,n){e.exports={button:"ChatPage_button__YGw2p",messeges:"ChatPage_messeges__-ikZj",textarea:"ChatPage_textarea__3cH1X"}},207:function(e,t,n){e.exports={dialog:"DialodItem_dialog__36i-m"}},213:function(e,t,n){e.exports={h3:"MyPosts_h3__3w8UD",post:"MyPosts_post__3BCuh"}},214:function(e,t,n){e.exports={to_do:"ToDo_to_do__oqVoe",right:"ToDo_right__1Gmsd"}},215:function(e,t,n){e.exports={header:"TaskIndicator_header__L-NHN",add:"TaskIndicator_add__2Qc-K"}},297:function(e,t,n){e.exports={button:"Button_button__3u1Pv"}},301:function(e,t,n){e.exports={loader:"Preloader_loader__2JZ7Y"}},305:function(e,t,n){e.exports={todolist:"MyToDoList_todolist__3PZ_g"}},306:function(e,t,n){e.exports={toDoList:"ToDoList_toDoList__1ADLh"}},56:function(e,t,n){e.exports={users:"Users_users__3fDuq",userPhoto:"Users_userPhoto__5Kx8K",user_img:"Users_user_img__2YJLo",user:"Users_user__1Aa3v",button:"Users_button__oYryt",user_info:"Users_user_info__2rOlW",item_info:"Users_item_info__2DHjU",selectedPage:"Users_selectedPage__2tLXu",pagination:"Users_pagination__H3QEb",form:"Users_form__jCFRV"}},600:function(e,t,n){},601:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),a=n(35),c=n.n(a),i=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,620)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))},o=n(98),u=n(99),l=n(112),j=n(110),d=n(610),f=n(611),b=n(292),p=n.n(b),O=n(1),h=function(){return Object(O.jsx)(d.a,{children:Object(O.jsxs)(f.a,{span:23,children:[Object(O.jsx)(p.a,{level:3,children:"Setting"}),Object(O.jsx)("p",{children:"This section is under construction."})]})})},m=n(114),x=n.n(m),_=n(175),g=n.n(_),v=function(e){var t=e.message,n=e.myProfilePhoto;return Object(O.jsxs)("div",{className:g.a.messages,children:[Object(O.jsx)("div",{className:g.a.message,children:t}),Object(O.jsx)("div",{className:g.a.avatar,children:Object(O.jsx)("img",{src:n,alt:"avatar"})})]})},P=n(46),S=n(207),y=n.n(S),N=function(e){var t=e.id,n=e.name;return Object(O.jsx)("div",{className:y.a.dialog,children:Object(O.jsx)(P.c,{to:"/dialogs/".concat(t),className:y.a.dialog,children:n})})},w=n(297),I=n.n(w),k=function(e){return Object(O.jsx)("div",{children:Object(O.jsx)("button",{className:I.a.button,onClick:e.onClick,children:e.text})})},E=n(287),C=n(8),T=n(218),F=n(286),U=n(176),D=n.n(U),L=function(e){var t=e.meta,n=t.touched,r=t.error,s=e.children,a=n&&r;return Object(O.jsxs)("div",{className:"".concat(D.a.formControl," ").concat(a?D.a.error:""),children:[Object(O.jsx)("div",{children:s}),a&&Object(O.jsx)("span",{children:r})]})},A=function(e){var t=e.input,n=(e.meta,Object(T.a)(e,["input","meta"]));return Object(O.jsx)(L,Object(C.a)(Object(C.a)({},e),{},{children:Object(O.jsx)("textarea",Object(C.a)(Object(C.a)({},t),n))}))},M=function(e){var t=e.input,n=(e.meta,Object(T.a)(e,["input","meta"]));return Object(O.jsx)(L,Object(C.a)(Object(C.a)({},e),{},{children:Object(O.jsx)("input",Object(C.a)(Object(C.a)({},t),n))}))};function R(e,t,n,r){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return Object(O.jsx)("div",{className:D.a.createField,children:Object(O.jsx)(F.a,Object(C.a)({placeholder:e,name:t,validate:n,component:r,type:s},a))})}var G,z,H=function(e){if(!e)return"Field is requred"},J=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbol")}},K=J(10),W=Object(E.a)({form:"dialogAddMessegeForm"})((function(e){var t=e.handleSubmit;return Object(O.jsx)("form",{onSubmit:t,className:x.a.textarea,children:Object(O.jsxs)("div",{children:[R("enter message","newMessageText",[H,K],A),Object(O.jsx)("div",{className:x.a.button,children:Object(O.jsx)(k,{text:"Send"})})]})})})),Y=function(e){var t=e.dialogs,n=e.messages,r=e.myProfilePhoto,s=e.newMessages,a=t.map((function(e){return Object(O.jsx)(N,{name:e.name,id:e.id},e.id)})),c=n.map((function(e){return Object(O.jsx)(v,{message:e.message,myProfilePhoto:r},e.id)}));return Object(O.jsxs)("div",{className:x.a.dialogs,children:[Object(O.jsx)("div",{className:x.a.items,children:a}),Object(O.jsx)("div",{className:x.a.messages,children:c}),Object(O.jsx)(W,{onSubmit:function(e){s(e.newMessageText),e.newMessageText=""}})]})},V=n(53),Z=n(58),q={dialogs:[{id:1,name:"Dima",active:"active"},{id:2,name:"Alina",active:" "},{id:3,name:"Ninja",active:" "},{id:4,name:"Spider-man",active:" "}],messages:[{id:1,message:"hello!!"},{id:2,message:"How are you?"},{id:3,message:"yoyo"},{id:4,message:"hello man) "}]},X=function(e){return{type:"dialog/SEND_MESSAGE",message:e}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dialog/SEND_MESSAGE":return Object(C.a)(Object(C.a)({},e),{},{messages:[].concat(Object(V.a)(e.messages),[{id:e.messages.length+2,message:t.message}])});default:return e}},B=n(13),$=n(28),ee=X,te=Object($.d)(Object(B.b)((function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages,myProfilePhoto:e.profilePage.myProfilePhoto}}),{newMessages:ee}))(Y),ne=n(25),re=n.n(ne),se=n(47),ae=n(300),ce=n.n(ae).a.create({withCredentials:!0,headers:{"API-KEY":"bac7d47b-efec-4715-8bfd-5f98ebf82dcf"},baseURL:"https://social-network.samuraijs.com/api/1.0/"});!function(e){e[e.Success=0]="Success",e[e.error=1]="error"}(G||(G={})),function(e){e[e.CaptchaIsRequired=10]="CaptchaIsRequired"}(z||(z={}));var ie=function(e){return ce.get("/profile/status/".concat(e)).then((function(e){return e.data}))},oe=function(e){var t=new FormData;return t.append("image",e),ce.put("/profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},ue=function(e){return ce.put("/profile",e).then((function(e){return e.data}))},le=function(e){ce.put("/profile/status",{status:e}).then((function(e){return e.data}))},je=function(e){return ce.get("profile/".concat(e)).then((function(e){return e.data}))},de={posts:[{id:1,message:"Hi, how are you?",like:1},{id:2,message:"Hi!!",like:55},{id:3,message:"I know it...",like:144},{id:4,message:"Have a good day",like:15},{id:5,message:"It's my first post!!",like:177}],profile:null,myProfilePhoto:null,status:" "},fe=function(e){return{type:"profile/ADD_POST",newPost:e}},be=function(e){return{type:"profile/SET_USER_PROFILE",profile:e}},pe=function(e){return{type:"profile/SET_MY_PROFILE_PHOTO",profile:e}},Oe=function(e){return{type:"profile/SET_STATUS",status:e}},he=function(e){return{type:"profile/SET_PHOTO",photo:e}},me=function(e){return function(){var t=Object(se.a)(re.a.mark((function t(n){var r;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,je(e);case 2:r=t.sent,n(be(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"profile/ADD_POST":return Object(C.a)(Object(C.a)({},e),{},{posts:[].concat(Object(V.a)(e.posts),[{id:e.posts.length+1,message:t.newPost,like:0}])});case"profile/SET_USER_PROFILE":return Object(C.a)(Object(C.a)({},e),{},{profile:t.profile});case"profile/SET_MY_PROFILE_PHOTO":return Object(C.a)(Object(C.a)({},e),{},{myProfilePhoto:t.profile});case"profile/SET_STATUS":return Object(C.a)(Object(C.a)({},e),{},{status:t.status});case"profile/DELETE_POST":return Object(C.a)(Object(C.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case"profile/SET_PHOTO":return Object(C.a)(Object(C.a)({},e),{},{myProfilePhoto:t.photo});default:return e}},_e=n(80),ge=n(14),ve=n.n(ge),Pe=n(301),Se=n.n(Pe),ye=n.p+"static/media/loader.932ba854.svg",Ne=function(){return Object(O.jsx)("div",{className:Se.a.loader,children:Object(O.jsx)("img",{src:ye,alt:"loader"})})},we=function(e){return e.profilePage.profile},Ie=function(e){return e.auth.userId},ke=function(e){return e.profilePage.status},Ee=function(e){return e.usersPage.totalUsersCount},Ce=function(e){var t=e.getStatus,n=e.userId,s=e.updateStatus;t(n);var a=Object(B.d)(ke),c=Object(r.useState)(!1),i=Object(_e.a)(c,2),o=i[0],u=i[1],l=Object(r.useState)(a),j=Object(_e.a)(l,2),d=j[0],f=j[1];Object(r.useEffect)((function(){f(a)}),[a]);return Object(O.jsxs)("div",{className:ve.a.status,children:[!o&&Object(O.jsxs)("div",{className:ve.a.status,children:[Object(O.jsxs)("span",{className:ve.a.profile_span,children:["Status: ",d||"no status"]}),Object(O.jsx)("button",{onClick:function(){return u(!0)},className:ve.a.button_status,children:"update status"})]}),o&&Object(O.jsxs)("div",{className:ve.a.status,children:[Object(O.jsx)("input",{autoFocus:!0,value:d,onChange:function(e){return f(e.currentTarget.value)}}),Object(O.jsx)("button",{className:ve.a.button_status,onClick:function(){u(!1),s(d)},children:"save"})]})]})},Te=n.p+"static/media/user-male.3759889a.png",Fe=J(10),Ue=Object(E.a)({form:"newPostText"})((function(e){var t=e.handleSubmit;return Object(O.jsx)("form",{onSubmit:t,className:ve.a.enter,children:Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:ve.a.textarea,children:R("enter post","newPostText",[H,Fe],A)}),Object(O.jsx)("div",{className:ve.a.button,children:Object(O.jsx)("button",{children:"add post"})})]})})})),De=function(e){var t=e.contactTitle,n=e.contactValue;return Object(O.jsxs)("div",{children:[Object(O.jsxs)("span",{className:ve.a.profile_span,children:[" ",t]}),":",n]})},Le=function(e){var t=e.profile,n=e.isOwner,r=e.goToEditMode;return Object(O.jsxs)("div",{className:ve.a.profile_info,children:[Object(O.jsxs)("div",{className:ve.a.profile_item,children:[Object(O.jsx)("span",{className:ve.a.profile_span,children:"Full mame:"}),t.fullName]}),Object(O.jsxs)("div",{className:ve.a.profile_item,children:[Object(O.jsx)("span",{className:ve.a.profile_span,children:"id: "}),t.userId]}),Object(O.jsxs)("div",{className:ve.a.profile_item,children:[Object(O.jsx)("span",{className:ve.a.profile_span,children:"About me: "}),t.aboutMe]}),Object(O.jsxs)("div",{className:ve.a.profile_item,children:[Object(O.jsx)("span",{className:ve.a.profile_span,children:"Look for a job: "}),t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&Object(O.jsxs)("div",{className:ve.a.profile_item,children:[Object(O.jsx)("span",{className:ve.a.profile_span,children:"My professional skills:"}),t.lookingForAJobDescription]}),Object(O.jsxs)("div",{className:ve.a.profile_item,children:[Object(O.jsx)("span",{className:ve.a.profile_span,children:"Contact: "}),Object.keys(t.contacts).map((function(e){return Object(O.jsx)(De,{contactTitle:e,contactValue:t.contacts[e]},e)}))]}),Object(O.jsx)("div",{children:n&&Object(O.jsx)("div",{children:Object(O.jsx)("button",{onClick:r,children:"edit"})})})]})},Ae=Object(E.a)({form:"editProfile"})((function(e){var t=e.handleSubmit,n=e.profile,r=e.isOwner,s=e.error;return console.log("profile"),Object(O.jsxs)("form",{onSubmit:t,children:[r&&Object(O.jsxs)("form",{className:ve.a.profile_info,children:[Object(O.jsx)("div",{className:ve.a.profile_item,children:Object(O.jsxs)("span",{className:ve.a.profile_span,children:["Full name:"," ",R("Full mame","fullName",[],M)]})}),Object(O.jsx)("div",{className:ve.a.profile_item,children:Object(O.jsxs)("span",{className:ve.a.profile_span,children:["Look for a job:",R("","lookingForAJob",[],M,"checkbox")]})}),Object(O.jsxs)("div",{className:ve.a.profile_item,children:[Object(O.jsx)("span",{className:ve.a.profile_span,children:"My professional skills:"}),R("enter your skill","lookingForAJobDescription",[],A,"")]}),Object(O.jsxs)("div",{className:ve.a.profile_item,children:[Object(O.jsx)("span",{className:ve.a.profile_span,children:"About me:"}),R("enter about me","aboutMe",[],A,"")]}),Object(O.jsxs)("div",{className:ve.a.profile_item,children:[Object(O.jsx)("span",{className:ve.a.profile_span,children:"Contact: "}),Object.keys(n.contacts).map((function(e){return console.log(e),Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:e}),":"," ",R(e,"contacts.".concat(e),[],A,"")]},e)}))]})]}),Object(O.jsxs)("div",{children:[s&&Object(O.jsx)("div",{children:s}),r&&Object(O.jsx)("div",{children:Object(O.jsx)("button",{children:"save"})})]})]})})),Me=function(e){var t=e.profile,n=e.status,s=e.getStatus,a=(e.myId,e.updateStatus),c=e.addPosts,i=e.isOwner,o=e.savePhoto,u=e.saveProfile,l=Object(r.useState)(!1),j=Object(_e.a)(l,2),d=j[0],f=j[1];if(!t)return Object(O.jsx)(Ne,{});return Object(O.jsx)("div",{className:ve.a.myPosts,children:Object(O.jsxs)("div",{className:ve.a.profile,children:[Object(O.jsx)("img",{src:t.photos.large||Te,className:ve.a.profile_img,alt:"photos"}),i&&Object(O.jsx)("div",{className:ve.a.profile_addPhoto,children:Object(O.jsx)("input",{type:"file",onChange:function(e){e.target.files&&e.target.files.length&&o(e.target.files[0])}})}),i&&Object(O.jsx)(Ce,{status:n,getStatus:s,userId:t.userId,updateStatus:a}),d?Object(O.jsx)(Ae,{isOwner:i,initialValues:t,profile:t,onSubmit:function(e){u(e).then((function(){f(!1)}))}}):Object(O.jsx)(Le,{profile:t,isOwner:i,goToEditMode:function(){return f(!0)}}),Object(O.jsx)(Ue,{onSubmit:function(e){return c(e.newPostText)}})]})})},Re=Object(B.b)((function(e){return{status:e.profilePage.status,myId:e.auth.userId}}),{addPosts:function(e){return function(){var t=Object(se.a)(re.a.mark((function t(n){return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(fe(e)),n(Object(Z.a)("newPostText"));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getStatus:function(e){return function(){var t=Object(se.a)(re.a.mark((function t(n){var r;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie(e);case 2:r=t.sent,n(Oe(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(se.a)(re.a.mark((function t(n){return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:le(e),n(Oe(e));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(se.a)(re.a.mark((function t(n){var r;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oe(e);case 2:0===(r=t.sent).resultCode&&n(he(r.data.photos.large));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(se.a)(re.a.mark((function t(n,r){var s,a;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=r().auth.userId,t.next=3,ue(e);case 3:if(0!==(a=t.sent).resultCode){t.next=8;break}n(me(s)),t.next=10;break;case 8:return n(Object(Z.b)("editProfile",{_error:a.messages[0]})),t.abrupt("return",Promise.reject(a.messages[0]));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})(Me),Ge=n(96),ze=n.n(Ge),He=n.p+"static/media/like.66cbaf98.png",Je=function(e){var t=e.myProfilePhoto,n=e.messege,r=e.like;return Object(O.jsx)("div",{className:ze.a.posts,children:Object(O.jsxs)("div",{className:ze.a.post,children:[Object(O.jsx)("img",{src:t||Te,alt:"",className:ze.a.img}),Object(O.jsx)("span",{className:ze.a.text,children:n}),Object(O.jsxs)("div",{className:ze.a.likes,children:[Object(O.jsx)("img",{src:He,alt:"",className:ze.a.like}),Object(O.jsxs)("span",{children:[" ",r]})]})]})})},Ke=n(213),We=n.n(Ke),Ye=function(e){var t=Object(V.a)(e.posts).reverse().map((function(t){return Object(O.jsx)(Je,{messege:t.message,like:t.like,myProfilePhoto:e.myProfilePhoto},t.id)}));return Object(O.jsxs)("div",{className:We.a.post,children:[Object(O.jsx)("h3",{className:We.a.h3,children:"My posts:"}),t]})},Ve=s.a.memo(Ye),Ze=Object(B.b)((function(e){return{posts:e.profilePage.posts,myProfilePhoto:e.profilePage.myProfilePhoto}}),{})(Ve),qe=function(e){var t=e.isOwner,n=Object(B.d)(we),r=Object(B.c)();return Object(O.jsxs)("div",{children:[Object(O.jsx)(Re,{profile:n,isOwner:t,getStatus:function e(t){r(e(t))},updateStatus:function e(t){r(e(t))},addPosts:function e(t){r(e(t))},savePhoto:function e(t){r(e(t))},saveProfile:function e(t){r(e(t))}}),Object(O.jsx)(Ze,{})]})};var Xe=function(e){return function(t){return Object(O.jsx)(s.a.Suspense,{fallback:Object(O.jsx)(Ne,{}),children:Object(O.jsx)(e,Object(C.a)({},t))})}},Qe=n(31),Be=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).refreshProfile=function(){e.props.getUser(e.props.match.params.userId||e.props.userId)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(){this.refreshProfile()}},{key:"render",value:function(){return Object(O.jsx)(qe,Object(C.a)(Object(C.a)({},this.props),{},{isOwner:!this.props.match.params.userId}))}}]),n}(s.a.Component),$e=Object($.d)(Xe,Qe.h,Object(B.b)((function(e){return{userId:Ie(e)}}),{getUser:me}))(Be),et=n(168),tt=n.n(et),nt=Object(E.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,r=e.captchaUrl;return Object(O.jsxs)("form",{onSubmit:t,children:[R("login","email",[H],M),R("password","password",[H],M,"password"),r&&Object(O.jsx)("img",{src:r,alt:"captchaUrl"}),r&&R("symbol from img","captcha",[H],M,"",{}),n&&Object(O.jsx)("div",{className:tt.a.formSummaryError,children:n}),R("","rememberMe",[],M,"checkbox")," ","remember me",Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{children:"Submit"}),Object(O.jsxs)("button",{style:{margin:"10px"},children:[" ",Object(O.jsx)("a",{href:"https://social-network.samuraijs.com/signUp",children:"Sing Up"})]})]})]})})),rt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return ce.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r}).then((function(e){return e.data}))},st=function(){return ce.delete("auth/login").then((function(e){return e.data}))},at=function(){return ce.get("auth/me").then((function(e){return e.data}))},ct=function(){return ce.get("security/get-captcha-url").then((function(e){return e}))},it={isFetching:!1,userId:null,login:null,email:null,isAuth:!1,avatar:null,captchaUrl:null},ot=function(e){return{type:"auth/GET_CAPTCHA_URL_SUCCESS",payload:{captchaUrl:e}}},ut=function(e,t,n,r){return{type:"auth/SET_USER_DATA",payload:{userId:e,login:t,email:n,isAuth:r}}},lt=function(){return function(){var e=Object(se.a)(re.a.mark((function e(t){var n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct();case 2:n=e.sent,t(ot(n.data.url));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_USER_DATA":case"auth/GET_CAPTCHA_URL_SUCCESS":return Object(C.a)(Object(C.a)({},e),t.payload);default:return e}},dt=function(e){return e.auth.captchaUrl},ft=function(e){return e.auth.isAuth},bt=function(e){var t=Object(B.d)(dt),n=Object(B.d)(ft),r=Object(B.c)();return n?Object(O.jsx)(Qe.a,{to:"/profile"}):Object(O.jsxs)("div",{className:tt.a.login,children:[Object(O.jsx)("h3",{children:"Login"}),Object(O.jsx)(nt,{onSubmit:function(e){var t,n,s,a;r((t=e.email,n=e.password,s=e.rememberMe,a=e.captcha,function(){var e=Object(se.a)(re.a.mark((function e(r){var c,i;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(t,n,s,a);case 2:(c=e.sent).resultCode===G.Success?r(function(){var e=Object(se.a)(re.a.mark((function e(t){var n,r,s,a,c;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at();case 2:(n=e.sent).resultCode===G.Success&&(r=n.data,s=r.id,a=r.login,c=r.email,t(ut(s,a,c,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):(c.resultCode===z.CaptchaIsRequired&&r(lt()),i=c.messages.length>0?c.messages[0]:"common error",r(Object(Z.b)("login",{_error:i})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},captchaUrl:t})]})},pt=n(608),Ot=n(317),ht=n(178),mt=n.n(ht),xt=n(303),_t=n.n(xt),gt=pt.a.TextArea,vt=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),Pt=function(){return Object(O.jsx)("div",{children:Object(O.jsx)(St,{})})},St=function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)(yt,{}),Object(O.jsx)(wt,{})]})},yt=function(e){var t=Object(r.useState)([]),n=Object(_e.a)(t,2),s=n[0],a=n[1];return Object(r.useEffect)((function(){vt.addEventListener("message",(function(e){var t=JSON.parse(e.data);a((function(e){return[].concat(Object(V.a)(e),Object(V.a)(t))}))}))}),[]),Object(O.jsx)("div",{className:mt.a.messeges,children:s.map((function(e,t){return Object(O.jsx)(Nt,{message:e},t)}))})},Nt=function(e){var t=e.message;return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{children:[Object(O.jsx)(_t.a,{size:40,src:t.photo,children:"USER"}),t.message]}),Object(O.jsx)("div",{children:t.userName}),Object(O.jsx)("hr",{})]})},wt=function(){var e=Object(r.useState)(""),t=Object(_e.a)(e,2),n=t[0],s=t[1];return Object(O.jsxs)("div",{className:mt.a.textarea,children:[Object(O.jsx)(gt,{rows:3,onChange:function(e){s(e.target.value)},placeholder:"Enter your massage",value:n}),Object(O.jsx)("div",{children:Object(O.jsx)(Ot.a,{type:"primary",className:mt.a.button,onClick:function(){n&&(vt.send(n),s(""))},children:"Send"})})]})},It=n(304),kt=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(C.a)(Object(C.a)({},e),r):e}))},Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return ce.get("users?page=".concat(e,"&count=").concat(t,"&term=").concat(n)+(null===r?"":"&friend=".concat(r))).then((function(e){return e.data}))},Ct=function(e){return ce.delete("follow/".concat(e)).then((function(e){return e.data}))},Tt=function(e){return ce.post("follow/".concat(e)).then((function(e){return e.data}))},Ft={users:[],pageSize:100,totalUsersCount:11910,currentPage:1,isFetching:!0,followingInProgress:[],filter:{term:"",friend:null}},Ut=function(e){return{type:"user/FOLLOW",userId:e}},Dt=function(e){return{type:"user/UNFOLLOW",userId:e}},Lt=function(e){return{type:"user/SET_USERS",users:e}},At=function(e){return{type:"user/SET_FILTER",payload:e}},Mt=function(e){return{type:"user/SET_CURRENT_PAGE",currentPage:e}},Rt=function(e){return{type:"user/SET_TOTAL_USERS_CURRENT",totalCount:e}},Gt=function(e){return{type:"user/TOGGLE_IS_FETCHING",isFetching:e}},zt=function(e,t){return{type:"user/TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,id:t}},Ht=function(e,t,n){return function(){var r=Object(se.a)(re.a.mark((function r(s){var a;return re.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s(Gt(!0)),s(Mt(e)),s(At(n)),r.next=5,Et(e,t,n.term,n.friend);case 5:a=r.sent,s(Lt(a.items)),s(Rt(a.totalCount)),s(Gt(!1));case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"user/FOLLOW":return Object(C.a)(Object(C.a)({},e),{},{users:kt(e.users,t.userId,"id",{followed:!0})});case"user/UNFOLLOW":return Object(C.a)(Object(C.a)({},e),{},{users:kt(e.users,t.userId,"id",{followed:!1})});case"user/SET_USERS":return Object(C.a)(Object(C.a)({},e),{},{users:Object(V.a)(t.users)});case"user/SET_CURRENT_PAGE":return Object(C.a)(Object(C.a)({},e),{},{currentPage:t.currentPage});case"user/SET_TOTAL_USERS_CURRENT":return Object(C.a)(Object(C.a)({},e),{},{totalUsersCount:t.totalCount});case"user/TOGGLE_IS_FETCHING":return Object(C.a)(Object(C.a)({},e),{},{isFetching:t.isFetching});case"user/SET_FILTER":return Object(C.a)(Object(C.a)({},e),{},{filter:t.payload});case"user/TOGGLE_IS_FOLLOWING_PROGRESS":return Object(C.a)(Object(C.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(V.a)(e.followingInProgress),[t.id]):e.followingInProgress.filter((function(e){return e!==t.id}))});default:return e}},Kt=n(289),Wt={initialized:!1},Yt=function(){return{type:"app/SET_INITIALIZED"}},Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/SET_INITIALIZED":return Object(C.a)(Object(C.a)({},e),{},{initialized:!0});default:return e}},Zt=Object($.c)({profilePage:xe,dialogsPage:Q,usersPage:Jt,auth:jt,form:Kt.a,app:Vt}),qt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||$.d,Xt=Object($.e)(Zt,qt(Object($.a)(It.a)));window.store=Xt;var Qt=Xt,Bt=(n(283),n(305)),$t=n.n(Bt),en=n(140),tn=n.n(en),nn=function(e){return Object(O.jsx)("div",{className:tn.a.input_form,children:Object(O.jsxs)("form",{onSubmit:e.onSubmit,id:"myForm",className:tn.a.formik,children:[Object(O.jsx)("input",{className:tn.a.input,type:"text",placeholder:"Add to-do",onChange:e.onChange}),Object(O.jsx)("button",{className:tn.a.add,children:"+add"})]})})},rn=n(214),sn=n.n(rn),an=function(e){return Object(O.jsxs)("div",{className:sn.a.to_do,children:[e.task,Object(O.jsx)("button",{className:sn.a.right,onClick:function(){return e.onDelete(e.index)}})]})},cn=n(306),on=n.n(cn),un=function(e){var t=e.lists.map((function(t){return Object(O.jsx)(an,{task:t.task,index:t.id,onDelete:e.onDelete},t.id)}));return Object(O.jsx)("div",{className:on.a.toDoList,children:t})},ln=n(215),jn=n.n(ln),dn=function(e){return Object(O.jsx)("div",{className:jn.a.header,children:Object(O.jsx)("h3",{className:jn.a.h3,children:"You have ".concat(e.number," ").concat(1===e.number?" task":" tasks")})})},fn=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={lists:[{task:"Keep calm and carry on",id:1}],input:""},e.handleChange=function(t){e.setState({input:t.target.value})},e.handleSubmit=function(t){var n;t.preventDefault(),""!==e.state.input&&(n={task:e.state.input,id:e.state.lists.length+1},e.setState({lists:[].concat(Object(V.a)(e.state.lists),[n]),input:""}),document.getElementById("myForm").reset())},e.handleDelete=function(t){var n=e.state.lists.filter((function(e){return e.id!==t}));e.setState({lists:n})},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:$t.a.todolist,children:[Object(O.jsx)(nn,{onChange:this.handleChange,onSubmit:this.handleSubmit}),Object(O.jsx)(un,{lists:this.state.lists,onDelete:this.handleDelete}),Object(O.jsx)(dn,{number:this.state.lists.length})]})}}]),n}(r.Component),bn=n(56),pn=n.n(bn),On=n(606),hn=function(e){var t=e.user,n=e.followingInProgress,r=e.unfollow,s=e.follow,a=t.status;return Object(O.jsxs)("div",{className:pn.a.user,children:[Object(O.jsxs)("span",{children:[Object(O.jsx)("div",{className:pn.a.userPhoto,children:Object(O.jsx)(P.c,{to:"/profile/".concat(t.id),children:Object(O.jsx)("img",{className:pn.a.user_img,src:t.photos.small||Te,alt:"foto"})})}),Object(O.jsx)("div",{className:pn.a.button,children:t.followed?Object(O.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){r(t.id)},children:"Unfollow"}):Object(O.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){s(t.id)},children:"Follow"})})]}),Object(O.jsxs)("span",{className:pn.a.user_info,children:[Object(O.jsxs)("div",{className:pn.a.item_info,children:["Name: ",t.name]}),Object(O.jsx)("div",{className:pn.a.item_info,children:a?a.length>30?a.substr(0,30):a:"no status"}),Object(O.jsxs)("div",{className:pn.a.item_info,children:[" id : ",t.id]})]})]})},mn=n(141),xn=n(309),_n=function(e){return e.usersPage.users},gn=(Object(xn.a)(_n,(function(e){return e.filter((function(e){return!0}))})),function(e){return e.usersPage.pageSize}),vn=function(e){return e.usersPage.totalUsersCount},Pn=function(e){return e.usersPage.currentPage},Sn=function(e){return e.usersPage.isFetching},yn=function(e){return e.usersPage.followingInProgress},Nn=function(e){return e.usersPage.filter},wn=function(){return{}},In=s.a.memo((function(e){var t=Object(B.d)(Nn);return Object(O.jsx)(mn.c,{enableReinitialize:!0,initialValues:{term:t.term,friend:String(t.friend)},validate:wn,onSubmit:function(t,n){var r=n.setSubmitting,s={term:t.term,friend:"null"===t.friend?null:"true"===t.friend};e.onFilterChanged(s),r(!1)},children:function(e){var t=e.isSubmitting;return Object(O.jsxs)(mn.b,{className:pn.a.form,children:[Object(O.jsx)(mn.a,{type:"text",name:"term"}),Object(O.jsxs)(mn.a,{name:"friend",as:"select",children:[Object(O.jsx)("option",{value:"null",children:"all "}),Object(O.jsx)("option",{value:"true",children:"Only followed"}),Object(O.jsx)("option",{value:"false",children:"Only unfollowed"})]}),Object(O.jsx)("button",{type:"submit",disabled:t,children:"Find"})]})}})})),kn=n(216),En=function(e){var t=Object(B.d)(vn),n=Object(B.d)(Pn),s=Object(B.d)(gn),a=Object(B.d)(Nn),c=Object(B.d)(_n),i=Object(B.d)(yn),o=Object(B.c)(),u=function(e){o(function(e){return function(){var t=Object(se.a)(re.a.mark((function t(n){return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(zt(!0,e)),t.next=3,Tt(e);case 3:0===t.sent.resultCode&&n(Ut(e)),n(zt(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))},l=function(e){o(function(e){return function(){var t=Object(se.a)(re.a.mark((function t(n){return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(zt(!0,e)),t.next=3,Ct(e);case 3:0===t.sent.resultCode&&n(Dt(e)),n(zt(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))},j=Object(Qe.g)();return Object(r.useEffect)((function(){var e=kn.parse(j.location.search.substr(1)),t=n,r=a;switch(e.page&&(t=Number(e.page)),e.term&&(r=Object(C.a)(Object(C.a)({},r),{},{term:e.term})),e.friend){case"null":r=Object(C.a)(Object(C.a)({},r),{},{friend:null});break;case"true":r=Object(C.a)(Object(C.a)({},r),{},{friend:!0});break;case"false":r=Object(C.a)(Object(C.a)({},r),{},{friend:!1})}o(Ht(t,s,r))}),[j,s]),Object(r.useEffect)((function(){var e={};a.term&&(e.term=a.term),null!==a.friend&&(e.friend=String(a.friend)),1!==n&&(e.page=String(n)),j.push({pathname:"/developers",search:kn.stringify(e)})}),[a,n,j]),Object(O.jsxs)("div",{children:[Object(O.jsx)(In,{onFilterChanged:function(e){o(Ht(1,s,e))}}),Object(O.jsx)(On.a,{className:pn.a.pagination,showSizeChanger:!1,defaultCurrent:1,pageSize:100,total:t,current:n,onChange:function(e){o(Ht(e,s,a))}}),Object(O.jsx)("div",{className:pn.a.users,children:c.map((function(e){return Object(O.jsx)(hn,{user:e,followingInProgress:i,follow:u,unfollow:l},e.id)}))})]})},Cn=function(e){var t=Object(B.d)(Sn);return Object(O.jsxs)(O.Fragment,{children:[t?Object(O.jsx)(Ne,{}):null,Object(O.jsx)(En,{})]})},Tn=n(609),Fn=n(605),Un=n(612),Dn=n(613),Ln=n(614),An=function(e){return e.auth.isAuth},Mn=function(e){return e.profilePage.myProfilePhoto},Rn=function(e){return e.auth.login},Gn=n(312),zn=n.n(Gn),Hn=function(){var e=Object(B.d)(An),t=Object(B.d)(Rn),n=Object(B.d)(Mn),r=Object(B.c)(),s=Fn.a.Header;return Object(O.jsx)(s,{className:"header",children:Object(O.jsxs)(d.a,{children:[Object(O.jsx)(f.a,{className:"gutter-row",span:4,offset:1,children:Object(O.jsx)(Tn.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],children:Object(O.jsx)(Tn.a.Item,{children:Object(O.jsx)(P.b,{to:"/developers",children:"Developers"})},"1")})}),e?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(f.a,{className:"gutter-row",span:1,offset:11,children:Object(O.jsx)("img",{src:n||"",width:"32px",alt:"avatar"})}),Object(O.jsx)(f.a,{className:"gutter-row",span:2,children:Object(O.jsxs)(zn.a,{type:"warning",keyboard:!0,children:[t," "]})}),Object(O.jsx)(f.a,{className:"gutter-row",span:2,children:Object(O.jsx)(Ot.a,{onClick:function(){r(function(){var e=Object(se.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st();case 2:e.sent.resultCode===G.Success&&t(ut(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Log out"})})]}):Object(O.jsx)(f.a,{className:"gutter-row",span:6,children:Object(O.jsx)(Ot.a,{children:Object(O.jsx)(P.b,{to:"/login",children:"Login"})})})]})})},Jn=n(607),Kn=function(){var e=Object(B.d)(Ee);return Object(O.jsx)(d.a,{gutter:16,children:Object(O.jsx)(f.a,{span:12,children:Object(O.jsx)(Jn.a,{title:"Active Users",value:e})})})},Wn=Tn.a.SubMenu,Yn=Fn.a.Content,Vn=Fn.a.Footer,Zn=Fn.a.Sider,qn=s.a.lazy((function(){return n.e(4).then(n.bind(null,621))})),Xn=s.a.lazy((function(){return n.e(3).then(n.bind(null,622))})),Qn=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(O.jsx)(Ne,{}):Object(O.jsxs)(Fn.a,{children:[Object(O.jsx)(Hn,{}),Object(O.jsx)(Yn,{style:{padding:"0 50px"},children:Object(O.jsxs)(Fn.a,{className:"site-layout-background",style:{padding:"24px 0"},children:[Object(O.jsx)(Zn,{className:"site-layout-background",width:200,children:Object(O.jsxs)(Tn.a,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],style:{height:"100%"},children:[Object(O.jsx)(Wn,{icon:Object(O.jsx)(Un.a,{}),title:"My profile",children:Object(O.jsx)(Tn.a.Item,{children:Object(O.jsx)(P.b,{to:"/profile",children:"Profile"})},"1")},"sub1"),Object(O.jsxs)(Wn,{icon:Object(O.jsx)(Dn.a,{}),title:"Developers",children:[Object(O.jsx)(Tn.a.Item,{children:Object(O.jsx)(P.b,{to:"/developers",children:" Developers "})},"2"),Object(O.jsx)(Tn.a.Item,{children:Object(O.jsx)(P.b,{to:"/dialogs",children:" Massages "})},"3"),Object(O.jsx)(Tn.a.Item,{children:Object(O.jsx)(P.b,{to:"/chat",children:" Chat"})},"4")]},"sub2"),Object(O.jsxs)(Wn,{icon:Object(O.jsx)(Ln.a,{}),title:"Other",children:[Object(O.jsx)(Tn.a.Item,{children:Object(O.jsx)(P.b,{to:"/music",children:"Music"})},"5"),Object(O.jsx)(Tn.a.Item,{children:Object(O.jsx)(P.b,{to:"/todolist",children:" My to do list"})},"6"),Object(O.jsx)(Tn.a.Item,{children:Object(O.jsx)(P.b,{to:"/setting",children:" Setting"})},"7")]},"sub3"),Object(O.jsx)(Kn,{})]})}),Object(O.jsx)(Yn,{style:{padding:"0 100px",minHeight:280},children:Object(O.jsxs)(Qe.d,{children:[Object(O.jsx)(Qe.b,{exact:!0,path:"/",render:function(){return Object(O.jsx)(Qe.a,{to:"/profile"})}}),Object(O.jsx)(Qe.b,{path:"/profile/:userId?",render:function(){return Object(O.jsx)($e,{})}}),Object(O.jsx)(Qe.b,{path:"/dialogs",render:function(){return Object(O.jsx)(te,{})}}),Object(O.jsx)(Qe.b,{path:"/news",render:Xe(qn)}),Object(O.jsx)(Qe.b,{path:"/music",render:Xe(Xn)}),Object(O.jsx)(Qe.b,{path:"/developers",render:function(){return Object(O.jsx)(Cn,{})}}),Object(O.jsx)(Qe.b,{path:"/setting",render:function(){return Object(O.jsx)(h,{})}}),Object(O.jsx)(Qe.b,{path:"/todolist",render:function(){return Object(O.jsx)(fn,{})}}),Object(O.jsx)(Qe.b,{path:"/chat",render:function(){return Object(O.jsx)(Pt,{})}}),Object(O.jsx)(Qe.b,{path:"/login",render:function(){return Object(O.jsx)(bt,{})}}),Object(O.jsx)(Qe.b,{path:"/",render:function(){return Object(O.jsx)($e,{})}}),Object(O.jsx)(Qe.b,{path:"*",render:function(){return Object(O.jsx)("div",{children:" 404 NOT FOUND "})}})]})})]})}),Object(O.jsx)(Vn,{style:{textAlign:"center"},children:Object(O.jsxs)("p",{children:[" Go \xa9 2021 Created by ",Object(O.jsx)("a",{href:"https://www.linkedin.com/in/aleksandr-danilin-b351b8201/",children:"al4i"})]})})]})}}]),n}(s.a.Component),Bn=Object($.d)(Qe.h,Object(B.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(function(){var e=Object(se.a)(re.a.mark((function e(t){var n,r,s,a,c;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at();case 2:0===(n=e.sent).resultCode&&(r=n.data,s=r.id,a=r.login,c=r.email,t(ut(s,a,c,!0)),je(s).then((function(e){t(pe(e.photos.small))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Promise.all([t]).then((function(){return e(Yt)}))}}}))(Qn),$n=function(){return Object(O.jsx)(P.a,{children:Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(B.a,{store:Qt,children:Object(O.jsx)(Bn,{})})})})};n(600);c.a.render(Object(O.jsx)($n,{}),document.getElementById("root")),i()},96:function(e,t,n){e.exports={like:"Post_like__1ews0",post:"Post_post__16l6K",img:"Post_img__1GQIz",text:"Post_text__mK5CA",likes:"Post_likes__3c9SC"}}},[[601,1,2]]]);
//# sourceMappingURL=main.a504a111.chunk.js.map